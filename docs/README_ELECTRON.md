# SurveyApp Electron版 セットアップ手順

## 動作環境
- Windows 10/11
- Node.js 18以上（ビルド時のみ必要）

---

## 初回セットアップ（管理者が1回だけ実行）

### 1. Node.jsのインストール
https://nodejs.org/ から LTS版をダウンロードしてインストール

### 2. 依存パッケージのインストール
このフォルダで `setup.bat` をダブルクリック

### 3. 動作確認（開発モード）
`start_dev.bat` をダブルクリック
→ アプリが起動すればOK

### 4. 実行ファイルのビルド
`build.bat` をダブルクリック
→ `dist/SurveyApp.exe` が生成される

---

## 自治体ごとの配布

### フォルダ構成
```
自治体A用/
├─ SurveyApp.exe          ← dist/からコピー
├─ config/
│   └─ survey_A町.json    ← 自治体専用の設問定義
└─ data/
    └─ _csv/              ← CSVはここに自動保存される
```

### 手順
1. `dist/SurveyApp.exe` を新しいフォルダにコピー
2. `config/` フォルダを作成し、自治体用JSONを配置
3. `data/_csv/` フォルダを作成
4. フォルダ一式を入力担当者に配布

---

## 入力担当者の操作

### 起動
`SurveyApp.exe` をダブルクリック

### 入力者名の設定（オプション）
ショートカットを作成し、リンク先を以下のように設定：
```
SurveyApp.exe --operator=田中
```

### 入力作業
1. IDを入力
2. 設問に回答
3. 保存ボタン

### CSV出力
「CSV出力」ボタンをクリック
→ `data/_csv/` に自動保存される

---

## CSV回収

作業終了後、各自の `data/_csv/` フォルダを回収

```
PC-A/data/_csv/*.csv
PC-B/data/_csv/*.csv
PC-C/data/_csv/*.csv
        ↓
    _admin/集計処理.bat で統合
```

---

## トラブルシューティング

### アプリが起動しない
- Windows Defenderがブロックしている可能性
  → 「詳細情報」→「実行」をクリック

### 設定ファイルが見つかりませんエラー
- `config/` フォルダにJSONファイルがあるか確認
- ファイル名が `.json` で終わっているか確認

### CSVが保存されない
- `data/_csv/` フォルダが存在するか確認
- フォルダの書き込み権限を確認

### 画面が真っ白
- JSONファイルの文法エラーをチェック
- ブラウザの開発者ツール（F12）でエラーを確認

---

## 従来版（localhost）との違い

| 項目 | 従来版 | Electron版 |
|------|--------|------------|
| 起動方法 | start.bat | SurveyApp.exe |
| CSV保存先 | ダウンロードフォルダ | data/_csv/ |
| サーバー | 必要（Python） | 不要 |
| 配布サイズ | 数MB | 約150MB |
